const NotFound = { template: '<p>'+window.location.pathname+' -> Page not found</p>' }
const router = new VueRouter({
    mode: 'history',
    routes:[
        {path: '/', component: window.httpVueLoader('/Reservation/Accueil/VueAccueil.vue')},
        {path: '/Sorties', component: window.httpVueLoader('/Reservation/Spectacle/VueList.vue')},
        {path: '/Sorties/:url', component: window.httpVueLoader('/Reservation/Spectacle/VueFiche.vue')},
        {path: '/Partenaires', component: window.httpVueLoader('/Reservation/Organisation/VuePart.vue')},
        {path: '/Partenaires/:url', component: window.httpVueLoader('/Reservation/Organisation/VueFiche.vue')},
        {path: '/Relais-Sociaux', component: window.httpVueLoader('/Reservation/Client/VueRelais.vue')},
        {path: '/Relais-Sociaux/:url', component: window.httpVueLoader('/Reservation/Client/VueFiche.vue')},
    {%  for menu in User.Menus %}
            {% if menu.Url!='' and menu.Url!='sorties' %}
            {path: '/{{ menu.Url }}', component: window.httpVueLoader('/{{ menu.Alias }}/VuePage.vue'+'?tms='+Date.now())},
            {% endif %}
        {% endfor %}
    ]
});

//Declaration filtre
Vue.filter('date', function (value) {
if (value == '' || value == null || value == undefined) return N/A;
    var vals = value.split('/');
    var tmpDate = vals[2]+'-'+vals[1]+'-'+vals[0];
    var date = new Date(tmpDate);
//console.error( date.toLocaleDateString("fr-FR"), value );
    return value;
});
Vue.filter('timestamp', function (value) {
    var timstampjs = parseInt(value) * 1000;

    var t = new Date(timstampjs).getHours() + ":" + new Date(timstampjs).getMinutes();
    var d = new Date(timstampjs).toLocaleDateString("fr-FR");
return (d + " <br> Ã  " + t);

});


window.spec = new Vue({
        el: '#app',
        data: {
        genre: '',
        spectacles: [],
        spectacle: false,
        organisations: [],
        organisation: false,
        date: '',
        appDate : '',
        search: '',
        dirty: 0,
        render: true,
        first: true,
        currentRoute: window.location.pathname,
    },
    router: router,
    components: {
        headerMenu: window.httpVueLoader('/Systeme/Header/VueMenu.vue'),
        footerNewsletter : window.httpVueLoader('/Systeme/Bloc/VueNewsletter.vue'),
        vuejsDatepicker
    }
});
window.spec2 = new Vue({
    el: '#footerlinks',
    data: {
        render: true
    },
    components: {
        footerNewsletter : window.httpVueLoader('/Systeme/Bloc/VueNewsletter.vue')
    }
});

