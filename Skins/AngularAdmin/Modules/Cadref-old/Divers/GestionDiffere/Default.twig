{# fiche gestionDiffere #}
{% from "Skins/AngularAdmin/Modules/Cadref/Default/form_components.twig" import label,flabel,finput,flinput,fvalues,fquery,fdate,ftext,fboolean %} 
<div class="page-content-inner">
    <section class="panel">
        <div class="panel-heading" style="padding-bottom:10px; padding-top:10px">
            <h4>
                {{ CurrentMenu.Titre }}
            </h4>
        </div>
        <div class="row" style="height:20px"></div>
		<div class="panel-body">
            <div class="row">
                <div class="col-xl-12">
                    <div class="panel panel-with-borders m-b-0">
                        <div class="panel-body cadref-no-padding">
							<div class="row">
								<div class="col-xl-8">

									<div class="row">
										<div class="col-md-2">
											{{ label("Utilisateur") }}
										</div>
										<div class="col-md-2">
											<select class="form-control cadref-input" ng-model="obj.Utilisateur" ng-init="obj.Utilisateur='{{ initiales }}'" style="width:80px">
												{% for u in users %}
													<option value="{{ u }}">{{ u }}</option>
												{% endfor %}
											</select>
										</div>
										<div class="col-md-2">
											{{ label("Mois d'échéance") }}
										</div>
										<div class="col-md-2">
											<div class="control-group">
												<input type="text" class="form-control cadref-input" placeholder="" ng-model="obj.DateDebut" ng-init="obj.DateDebut='{{ "now"|date("m/Y") }}'" mask="dd/dddd" style="width:80px"/>
											</div>
										</div>
									</div>
									<div class="row" style="height:10px"></div>
									<div class="row">
										<div class="col-md-6">
							<section class="panel" >
								<div class="panel-body cadref-no-padding">

<table class="table table-hover nowrap straight" id="CadrefReglement-table" width="100%" style="line-height:1" >
    <thead>
        <tr>
            <th title="Id" class="list-col-th-id" hidden>ID</th>
           <th>N°</th>
           <th>Nom</th>
            <th>Date</th>
            <th>Règlé</th>
            <th>M</th>
            <th>Notes</th>
            <th>U</th>
        </tr>
    </thead>
    <tbody>
    <tr dir-paginate="item in CadrefReglement.data" >
        <td class="list-col-td-id" hidden>{[{ item.id }]}</td>
        <td scope="row" class="cadref-td typedate"><span class="label">{[{ item.Numero }]}</span></td>
        <td scope="row" class="cadref-td typedate"><span class="label">{[{ item.Nom }]} {[{ item.Prenom }]}</span></td>
        <td scope="row" class="cadref-td typedate"><span class="label">{[{ item.DateReglement }]}</span></td>
        <td scope="row" class="cadref-td typefloat"><span class="label">{[{ item.Montant }]}</span></td>
        <td scope="row" class="cadref-td typevarchar"><span class="label">{[{ item.ModeReglement }]}</span></td>
        <td scope="row" class="cadref-td typevarchar"><span class="label">{[{ item.Notes }]}</span></td>
        <td scope="row" class="cadref-td typevarchar"><span class="label">{[{ item.Utilisateur }]}</span></td>
    </tr>
    </tbody>
</table>


								</div>
							</section>
										</div>
										<div class="col-md-6">
										</div>
									</div>



									<div class="row">
										<div class="col-md-2">
										</div>
										<div class="col-md-2">
											<button type="button" class="btn btn-success margin-inline cadref-btn-100" ng-click="printFunction()">Imprimer</button>
										</div>
									</div>
								</div>                            
							</div>
						</div>
					</div>
				</div>
			</div>
    </section>
</div>


<script>
	$('.datepicker-only-init').datetimepicker({
		widgetPositioning: {
			horizontal: 'left'
		},
		locale: 'fr',
		format: 'DD/MM/YYYY',
		icons: {
			time: "fa fa-clock-o",
			date: "fa fa-calendar",
			up: "fa fa-arrow-up",
			down: "fa fa-arrow-down"
		}
	});

	//Tweak moche a voir si on peut pas faire plus propre depuis le controller :x
	$(".datepicker-only-init").on("dp.change", function () {
		var input = $(this).children('input').eq(0);
		input.trigger('change');
		input.trigger('input');
	});
</script>
