app.controller('{{ Url }}Ctrl', function ($anchorScroll, $interval, $location, $scope, $rootScope, $http) {
console.log({{ Genre  | raw }});
console.log({{ GenreCoul  | raw }});
        $scope.colors = {{ GenreCoul  | raw }};
        $scope.Genre = {{ Genre  | raw }};

function returnCouleur (tab1,tab2,nb){
            $scope.res = new Array();
            var flag = false;
            for (var i=0;i<$scope.Genre.length;i++){
                flag = false
                for (var j=0;j< tab2.length;j++){
                    if ($scope.Genre[i] == tab2[j]){
                        if ( nb < 8 ){
                            $scope.res.push(parseInt(tab1[nb][j].NbPlaces));
                        }else if (nb >= 8 && nb <= 11){
                            $scope.res.push(parseInt(tab1[nb][j].NbProgrammees));
                        }else if (nb >= 11 && nb <= 13){
                            $scope.res.push(parseInt(tab1[nb][j].NbSpec));
                        }
                        flag = true;
                    }
                }
                if ($scope.Genre[i] != tab2[j] && flag == false){
                    $scope.res.push(0);
                }
            }
            return $scope.res;
        }

        Object.size = function (obj) {
            var size = 0, key;
            for (key in obj) {
                if (obj.hasOwnProperty(key)) size++;
            }
            return size;
        };

        $scope.nbJoursCurrentMonth = new Array();
        $scope.nbPersCurrentMonth = new Array();
        $scope.nbResCurrentMonth = new Array();

        $scope.nbJoursOldMonth = new Array();
        $scope.nbPersOldMonth = new Array();
        $scope.nbResOldMonth = new Array();

        $scope.nbMoisCurrentYear = new Array();
        $scope.nbPersCurrentYear = new Array();
        $scope.nbResCurrentYear = new Array();

        $scope.nbMoisOldYear = new Array();
        $scope.nbPersOldYear = new Array();
        $scope.nbResOldYear = new Array();

        $scope.nomResCurrentMonthGenre = new Array();
        $scope.nbPlacesCurrentMonthGenre = new Array();

        $scope.nomResOldMonthGenre = new Array();
        $scope.nbPlacesOldMonthGenre = new Array();

        $scope.nomResCurrentYearGenre = new Array();
        $scope.nbPlacesCurrentYearGenre = new Array();

        $scope.nomResOldYearGenre = new Array();
        $scope.nbPlacesOldYearGenre = new Array();

        $scope.nomProgCurrentMonthGenre = new Array();
        $scope.nbPlacesProgCurrentMonthGenre = new Array();

        $scope.nomProgOldMonthGenre = new Array();
        $scope.nbPlacesProgOldMonthGenre = new Array();

        $scope.nomProgCurrentYearGenre = new Array();
        $scope.nbPlacesProgCurrentYearGenre = new Array();

        $scope.nomProgOldYearGenre = new Array();
        $scope.nbPlacesProgOldYearGenre = new Array();

        $scope.nomSpecCurrentYearGenre = new Array();
        $scope.nbSpecCurrentYearGenre = new Array();

        $scope.nomSpecOldYearGenre = new Array();
        $scope.nbSpecOldYearGenre = new Array();

        $scope.nbPersOuiCurrentYear = new Array();

        $scope.nbPersOuiOldYear = new Array();

        $scope.nbPersRsaCurrentYear = new Array();

        $scope.nbPersRsaOldYear = new Array();

        $scope.nbPersHCurrentYear = new Array();

        $scope.nbPersHOldYear = new Array();

        $scope.NomVillCurrentMonth = new Array();
        $scope.nbResVillCurrentMonth = new Array();

        $scope.NomVillCurrentYear = new Array();
        $scope.nbResVillCurrentYear = new Array();

        $scope.NomVillOldYear = new Array();
        $scope.nbResVillOldYear = new Array();

        var nb07 = 0;
        var nb13 = 0;
        var nb26 = 0;
        var nb40 = 0;
        var nb60 = 0;
        var nb70 = 0;

        $tabAge = new Array();
        $tabNb = new Array();

        $tabAgeOld = new Array();
        $tabNbOld = new Array();

        $scope.Libelle = new Array();
        $scope.nbPersSpec = new Array();

var load = function () {

var optionsNbResPersCurrentMonth = {
series: [{
name: 'Nombre de places',
type: 'column',
data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
}, {
name: 'Nombre de reservations',
type: 'column',
data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
}],
chart: {
height: 350,
type: 'bar',
},
xaxis: {
categories: ['0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00','0/00']
}
};

            var optionsNbResPersOldMonth = {
                series: [{
                    name: 'Nombre de places',
                    type: 'column',
                    data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                }, {
                    name: 'Nombre de reservations',
                    type: 'column',
                    data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                }],
                chart: {
                    height: 350,
                    type: 'bar',
                },
               
                xaxis: {
                    categories: $scope.dayMonthOld
                }
            };

            var optionsNbResPersCurrentYear = {
                series: [{
                    name: 'Nombre de places',
                    type: 'column',
                    data: [0,0,0,0,0,0,0,0,0,0,0,0]
                }, {
                    name: 'Nombre de reservations',
                    type: 'column',
                    data: [0,0,0,0,0,0,0,0,0,0,0,0]
                }],
                chart: {
                    height: 350,
                    type: 'bar',
                },
               
                xaxis: {
                    categories: ['Jan','Fev','Mars','Avr','Mai','Jun','Jui','Aou','Sep','Oct','Nov','Dec']
                }
            };

            var optionsNbResPersOldYear = {
                series: [{
                    name: 'Nombre de places',
                    type: 'column',
                    data: [0,0,0,0,0,0,0,0,0,0,0,0]
                }, {
                    name: 'Nombre de reservations',
                    type: 'column',
                    data: [0,0,0,0,0,0,0,0,0,0,0,0]
                }],
                chart: {
                    height: 350,
                    type: 'bar',
                },
               
                xaxis: {
                    categories: ['Jan','Fev','Mars','Avr','Mai','Jun','Jui','Aou','Sep','Oct','Nov','Dec']
                }
            };

            var optionsNbPlaceCurrentMonthGenre = {
                chart: {
                    type: 'pie',
                },
                series: [50,50,10,10,10,10,10],
                labels: $scope.Genre,
                colors:$scope.colors
            }

            var optionsNbPlaceOldMonthGenre = {
                chart: {
                    type: 'pie'
                },
                series: [50,50,10,10,10,10],
                labels: ['Genre 1','Genre 2','Genre 3','Genre 4','Genre 5','Genre 6'],
                colors:$scope.colors
            }


            var optionsNbPlaceCurrentYearGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbPlaceOldYearGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbPlaceProgCurrentMonthGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbPlaceProgOldMonthGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }


            var optionsNbPlaceProgCurrentYearGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbPlaceProgOldYearGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbSpecCurrentYearGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbSpecOldYearGenre = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0],
                colors:$scope.colors
            }

            var optionsNbPersAccomCurrentYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: ['oui', 'non']
            }

            var optionsNbPersAccomOldYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: ['non', 'oui']
            }

            var optionsNbPersRsaCurrentYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: ['non', 'oui']
            }

            var optionsNbPersRsaOldYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: ['non', 'oui']
            }

            var optionsNbPersHCurrentYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: ['Homme', 'Femme']
            }

            var optionsNbPersHOldYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: ['Homme', 'Femme']
            }

            var optionsNbResVillCurrentMonth = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0]
            }

            var optionsNbResVillCurrentYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0]
            }

            var optionsNbResVillOldYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0]
            }

            var optionsNbResAgeCurrentYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0]
            }

            var optionsNbResAgeOldYear = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0]
            }

            var optionsNbPersSpec = {
                chart: {
                    type: 'pie'
                },
                series: [0,0,0,0,0,0,0,0,0,0,0,0],
                labels: [0,0,0,0,0,0,0,0,0,0,0,0]
            }

$scope.histoCharCurr = new ApexCharts(document.querySelector("#HistNbPersCurrentMonth"), optionsNbResPersCurrentMonth);
            $scope.histoCharOld = new ApexCharts(document.querySelector("#HistNbPersOldMonth"), optionsNbResPersOldMonth);
            $scope.histoCharCurrYear = new ApexCharts(document.querySelector("#HistNbPersCurrentYear"), optionsNbResPersCurrentYear);
            $scope.histoCharOldYear = new ApexCharts(document.querySelector("#HistNbPersOldYear"), optionsNbResPersOldYear);

            $scope.PieCharGenreCurrentMonth = new ApexCharts(document.querySelector("#PieNbPersCurrentMonth"), optionsNbPlaceCurrentMonthGenre);
            $scope.PieCharGenreOldMonth = new ApexCharts(document.querySelector("#PieNbPersOldMonth"), optionsNbPlaceOldMonthGenre);

            $scope.PieCharGenreCurrentYear = new ApexCharts(document.querySelector("#PieNbPersCurrentYear"), optionsNbPlaceCurrentYearGenre);
            $scope.PieCharGenreOldYear = new ApexCharts(document.querySelector("#PieNbPersOldYear"), optionsNbPlaceOldYearGenre);

            $scope.PieCharProgGenreCurrentMonth = new ApexCharts(document.querySelector("#PieNbProgCurrentMonth"), optionsNbPlaceProgCurrentMonthGenre);
            $scope.PieCharProgGenreOldMonth = new ApexCharts(document.querySelector("#PieNbProgOldMonth"), optionsNbPlaceProgOldMonthGenre);

            $scope.PieCharProgGenreCurrentYear = new ApexCharts(document.querySelector("#PieNbProgCurrentYear"), optionsNbPlaceProgCurrentYearGenre);
            $scope.PieCharProgGenreOldYear = new ApexCharts(document.querySelector("#PieNbProgOldYear"), optionsNbPlaceProgOldYearGenre);

            $scope.PieCharNbSpecGenreCurrentYear = new ApexCharts(document.querySelector("#PieNbSpecCurrentYear"), optionsNbSpecCurrentYearGenre);
            $scope.PieCharNbSpecGenreOldYear = new ApexCharts(document.querySelector("#PieNbSpecOldYear"), optionsNbSpecOldYearGenre);

            $scope.PieCharNbPersAccomCurrentYear = new ApexCharts(document.querySelector("#PieAccomCurrentYear"), optionsNbPersAccomCurrentYear);
            $scope.PieCharNbPersAccomOldYear = new ApexCharts(document.querySelector("#PieAccomOldYear"), optionsNbPersAccomOldYear);

            $scope.PieCharNbPersRsaCurrentYear = new ApexCharts(document.querySelector("#PieRsaCurrentYear"), optionsNbPersRsaCurrentYear);
            $scope.PieCharNbPersRsaOldYear = new ApexCharts(document.querySelector("#PieRsaOldYear"), optionsNbPersRsaOldYear);

            $scope.PieCharNbPersHCurrentYear = new ApexCharts(document.querySelector("#PieHCurrentYear"), optionsNbPersHCurrentYear);
            $scope.PieCharNbPersHOldYear = new ApexCharts(document.querySelector("#PieHOldYear"), optionsNbPersHOldYear);

            $scope.PieCharNbResVille = new ApexCharts(document.querySelector("#PieResVilCurrentMonth"), optionsNbResVillCurrentMonth);

            $scope.PieCharNbResVilleCurrentYear = new ApexCharts(document.querySelector("#PieResVilCurrentYear"), optionsNbResVillCurrentYear);
            $scope.PieCharNbResVilleOldYear = new ApexCharts(document.querySelector("#PieResVilOldYear"), optionsNbResVillOldYear);

            $scope.PieCharAgeCurrentYear = new ApexCharts(document.querySelector("#PieAgeCurrentYear"), optionsNbResAgeCurrentYear);
            $scope.PieCharAgeOldYear = new ApexCharts(document.querySelector("#PieAgeOldYear"), optionsNbResAgeOldYear);

            $scope.PieCharNbPersSpec = new ApexCharts(document.querySelector("#PieNbPersSpec"), optionsNbPersSpec);


$scope.histoCharCurr.render();
$scope.histoCharOld.render();
$scope.histoCharCurrYear.render();
$scope.histoCharOldYear.render();

$scope.PieCharGenreCurrentMonth.render();
$scope.PieCharGenreOldMonth.render();

$scope.PieCharGenreCurrentYear.render();
$scope.PieCharGenreOldYear.render();

$scope.PieCharProgGenreCurrentMonth.render();
$scope.PieCharProgGenreOldMonth.render();

$scope.PieCharProgGenreCurrentYear.render();
$scope.PieCharProgGenreOldYear.render();

$scope.PieCharNbSpecGenreCurrentYear.render();
$scope.PieCharNbSpecGenreOldYear.render();

$scope.PieCharNbPersAccomCurrentYear.render();
$scope.PieCharNbPersAccomOldYear.render();

$scope.PieCharNbPersRsaCurrentYear.render();
$scope.PieCharNbPersRsaOldYear.render();

$scope.PieCharNbPersHCurrentYear.render();
$scope.PieCharNbPersHOldYear.render();

$scope.PieCharNbResVille.render();
$scope.PieCharNbResVilleCurrentYear.render();
$scope.PieCharNbResVilleOldYear.render();

$scope.PieCharAgeCurrentYear.render();
$scope.PieCharAgeOldYear.render();

$scope.PieCharNbPersSpec.render();

return true;
}


        load();

        $scope.init = function () {
            $('#contain').spin();
            $('#HistNbPersCurrentMonth').spin();
            $('#HistNbPersOldMonth').spin();
            $('#HistNbPersCurrentYear').spin();
            $('#HistNbPersOldYear').spin();
            $('#PieNbPersCurrentMonth').spin();
            $('#PieNbPersOldMonth').spin();
            $('#PieNbPersCurrentYear').spin();
            $('#PieNbPersOldYear').spin();
            $('#PieNbProgCurrentMonth').spin();
            $('#PieNbProgOldMonth').spin();
            $('#PieNbProgCurrentYear').spin();
            $('#PieNbProgOldYear').spin();
            $('#PieNbSpecCurrentYear').spin();
            $('#PieNbSpecOldYear').spin();
            $('#PieAccomCurrentYear').spin();
            $('#PieAccomOldYear').spin();
            $('#PieRsaCurrentYear').spin();
            $('#PieRsaOldYear').spin();
            $('#PieHCurrentYear').spin();
            $('#PieHOldYear').spin();
            $('#PieResVilCurrentMonth').spin();
            $('#PieResVilCurrentYear').spin();
            $('#PieResVilOldYear').spin();
            $('#PieAgeCurrentYear').spin();
            $('#PieAgeOldYear').spin();
            $('#PieNbPersSpec').spin();
            $http.post('/Reservation/StatsAvancees/getData.json', {})
                .success(function (data) {
                    console.log(data);
                    $scope.donnee = data;
                    for (var i = 0; i < data[0].length; i++) {
                        $scope.nbJoursCurrentMonth.push(data[0][i].Legende);
                        $scope.nbPersCurrentMonth.push(data[0][i].NbPlaces);
                        $scope.nbResCurrentMonth.push(data[0][i].NbResa);
                    }
                    for (var i = 0; i < data[1].length; i++) {
                        $scope.nbJoursOldMonth.push(data[1][i].Legende);
                        $scope.nbPersOldMonth.push(data[1][i].NbPlaces);
                        $scope.nbResOldMonth.push(data[1][i].NbResa);
                    }
                    for (var i = 0; i < data[2].length; i++) {
                        $scope.nbMoisCurrentYear.push(data[2][i].Legende);
                        $scope.nbPersCurrentYear.push(data[2][i].NbPlaces);
                        $scope.nbResCurrentYear.push(data[2][i].NbResa);
                    }
                    for (var i = 0; i < data[3].length; i++) {
                        $scope.nbMoisOldYear.push(data[3][i].Legende);
                        $scope.nbPersOldYear.push(data[3][i].NbPlaces);
                        $scope.nbResOldYear.push(data[3][i].NbResa);
                    }
                    for (var i = 0; i < data[4].length; i++) {
                        $scope.nomResCurrentMonthGenre.push(data[4][i].Nom);
                        $scope.nbPlacesCurrentMonthGenre.push(parseInt(data[4][i].NbPlaces));
                    }

                    $scope.nbPlacesCurrentMonthGenre = returnCouleur($scope.donnee,$scope.nomResCurrentMonthGenre,4);
{#                    $scope.test = new Array();#}
{#                    var flag = false;#}
{#                    for (var i=0;i<$scope.Genre.length;i++){#}
{#                        flag = false#}
{#                        for (var j=0;j<$scope.nomResCurrentMonthGenre.length;j++){#}
{#                            if ($scope.Genre[i] == $scope.nomResCurrentMonthGenre[j]){#}
{#                                $scope.test.push(parseInt(data[4][j].NbPlaces));#}
{#                                flag = true;#}
{#                            }#}
{#                        }#}
{#                        if ($scope.Genre[i] != $scope.nomResCurrentMonthGenre[j] && flag == false){#}
{#                            $scope.test.push(0);#}
{#                        }#}
{#                    }#}
{#                    console.log($scope.test);#}

                    for (var i = 0; i < data[5].length; i++) {
                        $scope.nomResOldMonthGenre.push(data[5][i].Nom);
                        $scope.nbPlacesOldMonthGenre.push(parseInt(data[5][i].NbPlaces));
                    }
                    $scope.nbPlacesOldMonthGenre = returnCouleur($scope.donnee,$scope.nomResOldMonthGenre,5);

                    for (var i = 0; i < data[6].length; i++) {
                        $scope.nomResCurrentYearGenre.push(data[6][i].Nom);
                        $scope.nbPlacesCurrentYearGenre.push(parseInt(data[6][i].NbPlaces));
                    }
                    $scope.nbPlacesCurrentYearGenre = returnCouleur($scope.donnee,$scope.nomResCurrentYearGenre,6);

                    for (var i = 0; i < data[7].length; i++) {
                        $scope.nomResOldYearGenre.push(data[7][i].Nom);
                        $scope.nbPlacesOldYearGenre.push(parseInt(data[7][i].NbPlaces));
                    }
                    $scope.nbPlacesOldYearGenre = returnCouleur($scope.donnee,$scope.nomResOldYearGenre,7);

                    for (var i = 0; i < data[8].length; i++) {
                        $scope.nomProgCurrentMonthGenre.push(data[8][i].Nom);
                        $scope.nbPlacesProgCurrentMonthGenre.push(parseInt(data[8][i].NbProgrammees));
                    }
                    $scope.nbPlacesProgCurrentMonthGenre = returnCouleur($scope.donnee,$scope.nomProgCurrentMonthGenre,8);

                    for (var i = 0; i < data[9].length; i++) {
                        $scope.nomProgOldMonthGenre.push(data[9][i].Nom);
                        $scope.nbPlacesProgOldMonthGenre.push(parseInt(data[9][i].NbProgrammees));
                    }
                    $scope.nbPlacesProgOldMonthGenre = returnCouleur($scope.donnee,$scope.nomProgOldMonthGenre,9);

                    for (var i = 0; i < data[10].length; i++) {
                        $scope.nomProgCurrentYearGenre.push(data[10][i].Nom);
                        $scope.nbPlacesProgCurrentYearGenre.push(parseInt(data[10][i].NbProgrammees));
                    }
                    $scope.nbPlacesProgCurrentYearGenre = returnCouleur($scope.donnee,$scope.nomProgCurrentYearGenre,10);

                    for (var i = 0; i < data[11].length; i++) {
                        $scope.nomProgOldYearGenre.push(data[11][i].Nom);
                        $scope.nbPlacesProgOldYearGenre.push(parseInt(data[11][i].NbProgrammees));
                    }
                    $scope.nbPlacesProgOldYearGenre = returnCouleur($scope.donnee,$scope.nomProgOldYearGenre,11);

                    for (var i = 0; i < data[12].length; i++) {
                        $scope.nomSpecCurrentYearGenre.push(data[12][i].Nom);
                        $scope.nbSpecCurrentYearGenre.push(parseInt(data[12][i].NbSpec));
                    }
                    $scope.nbSpecCurrentYearGenre = returnCouleur($scope.donnee,$scope.nomSpecCurrentYearGenre,12);

                    for (var i = 0; i < data[13].length; i++) {
                        $scope.nomSpecOldYearGenre.push(data[13][i].Nom);
                        $scope.nbSpecOldYearGenre.push(parseInt(data[13][i].NbSpec));
                    }
                    $scope.nbSpecOldYearGenre = returnCouleur($scope.donnee,$scope.nomSpecOldYearGenre,13);

                    $scope.nbPersOuiCurrentYear.push(data[14].NbPersonneAccom);
                    $scope.nbPersOuiCurrentYear.push(data[14].NbPersonneNonAccom);

                    $scope.nbPersOuiOldYear.push(data[15].NbPersonneAccom);
                    $scope.nbPersOuiOldYear.push(data[15].NbPersonneNonAccom);

                    $scope.nbPersRsaCurrentYear.push(data[16].NbPersonneRsa);
                    $scope.nbPersRsaCurrentYear.push(data[16].NbPersonneNonRsa);

                    $scope.nbPersRsaOldYear.push(data[17].NbPersonneRsa);
                    $scope.nbPersRsaOldYear.push(data[17].NbPersonneNonRsa);

                    $scope.nbPersHCurrentYear.push(data[18].NbPersonneH);
                    $scope.nbPersHCurrentYear.push(data[18].NbPersonneF);

                    $scope.nbPersHOldYear.push(data[19].NbPersonneH);
                    $scope.nbPersHOldYear.push(data[19].NbPersonneF);

                    for (var i = 0; i < data[20].length; i++) {
                        $scope.NomVillCurrentMonth.push(data[20][i].Ville);
                        $scope.nbResVillCurrentMonth.push(parseInt(data[20][i].NbResa));
                    }
                    for (var i = 0; i < data[21].length; i++) {
                        $scope.NomVillCurrentYear.push(data[21][i].Ville);
                        $scope.nbResVillCurrentYear.push(parseInt(data[21][i].NbResa));
                    }
                    for (var i = 0; i < data[22].length; i++) {
                        $scope.NomVillOldYear.push(data[22][i].Ville);
                        $scope.nbResVillOldYear.push(parseInt(data[22][i].NbResa));
                    }
                    for (var i = 0; i < data[23].length; i++) {
                        if (data[23][i].Age.length < 3) {
                            if (parseInt(data[23][i].Age) <= 7) {
                                nb07 += parseInt(data[23][i].NbPersonne);
                            }
                            if (parseInt(data[23][i].Age) <= 13) {
                                nb13 += parseInt(data[23][i].NbPersonne);
                            }
                            if (parseInt(data[23][i].Age) <= 26) {
                                nb26 += parseInt(data[23][i].NbPersonne);
                            }
                            if (parseInt(data[23][i].Age) <= 40) {
                                nb40 += parseInt(data[23][i].NbPersonne);
                            }
                            if (parseInt(data[23][i].Age) <= 60) {
                                nb60 += parseInt(data[23][i].NbPersonne);
                            }
                            if (parseInt(data[23][i].Age) > 60) {
                                nb70 += parseInt(data[23][i].NbPersonne);
                            }
                        } else if (data[23][i].Age == '0-7') {
                            data[23][i].NbPersonne = parseInt(data[23][i].NbPersonne)
                            data[23][i].NbPersonne += nb07;
                            $tabAge.push(data[23][i].Age);
                            $tabNb.push(data[23][i].NbPersonne);
                        } else if (data[23][i].Age == '8-13') {
                            data[23][i].NbPersonne = parseInt(data[23][i].NbPersonne)
                            data[23][i].NbPersonne += nb13;
                            $tabAge.push(data[23][i].Age);
                            $tabNb.push(data[23][i].NbPersonne);
                        } else if (data[23][i].Age == '14-26') {
                            data[23][i].NbPersonne = parseInt(data[23][i].NbPersonne)
                            data[23][i].NbPersonne += nb26;
                            $tabAge.push(data[23][i].Age);
                            $tabNb.push(data[23][i].NbPersonne);
                        } else if (data[23][i].Age == '27-40') {
                            data[23][i].NbPersonne = parseInt(data[23][i].NbPersonne)
                            data[23][i].NbPersonne += nb40;
                            $tabAge.push(data[23][i].Age);
                            $tabNb.push(data[23][i].NbPersonne);
                        } else if (data[23][i].Age == '41-60') {
                            data[23][i].NbPersonne = parseInt(data[23][i].NbPersonne)
                            data[23][i].NbPersonne += nb60;
                            $tabAge.push(data[23][i].Age);
                            $tabNb.push(data[23][i].NbPersonne);
                        } else if (data[23][i].Age == '60+') {
                            data[23][i].NbPersonne = parseInt(data[23][i].NbPersonne)
                            data[23][i].NbPersonne += nb70;
                            $tabAge.push(data[23][i].Age);
                            $tabNb.push(data[23][i].NbPersonne);
                        }
                    }
                    for (var i = 0; i < data[24].length; i++) {
                        if (data[24][i].Age.length < 3) {
                            if (parseInt(data[24][i].Age) <= 7) {
                                nb07 += parseInt(data[24][i].NbPersonne);
                            }
                            if (parseInt(data[24][i].Age) <= 13) {
                                nb13 += parseInt(data[24][i].NbPersonne);
                            }
                            if (parseInt(data[24][i].Age) <= 26) {
                                nb26 += parseInt(data[24][i].NbPersonne);
                            }
                            if (parseInt(data[24][i].Age) <= 40) {
                                nb40 += parseInt(data[24][i].NbPersonne);
                            }
                            if (parseInt(data[24][i].Age) <= 60) {
                                nb60 += parseInt(data[24][i].NbPersonne);
                            }
                            if (parseInt(data[24][i].Age) > 60) {
                                nb70 += parseInt(data[24][i].NbPersonne);
                            }
                        } else if (data[24][i].Age == '0-7') {
                            data[24][i].NbPersonne = parseInt(data[24][i].NbPersonne)
                            data[24][i].NbPersonne += nb07;
                            $tabAgeOld.push(data[24][i].Age);
                            $tabNbOld.push(data[24][i].NbPersonne);
                        } else if (data[24][i].Age == '8-13') {
                            data[24][i].NbPersonne = parseInt(data[24][i].NbPersonne)
                            data[24][i].NbPersonne += nb13;
                            $tabAgeOld.push(data[24][i].Age);
                            $tabNbOld.push(data[24][i].NbPersonne);
                        } else if (data[24][i].Age == '14-26') {
                            data[24][i].NbPersonne = parseInt(data[24][i].NbPersonne)
                            data[24][i].NbPersonne += nb26;
                            $tabAgeOld.push(data[24][i].Age);
                            $tabNbOld.push(data[24][i].NbPersonne);
                        } else if (data[24][i].Age == '27-40') {
                            data[24][i].NbPersonne = parseInt(data[24][i].NbPersonne)
                            data[24][i].NbPersonne += nb40;
                            $tabAgeOld.push(data[24][i].Age);
                            $tabNbOld.push(data[24][i].NbPersonne);
                        } else if (data[24][i].Age == '41-60') {
                            data[24][i].NbPersonne = parseInt(data[24][i].NbPersonne)
                            data[24][i].NbPersonne += nb60;
                            $tabAgeOld.push(data[24][i].Age);
                            $tabNbOld.push(data[24][i].NbPersonne);
                        } else if (data[24][i].Age == '60+') {
                            data[24][i].NbPersonne = parseInt(data[24][i].NbPersonne)
                            data[24][i].NbPersonne += nb70;
                            $tabAgeOld.push(data[24][i].Age);
                            $tabNbOld.push(data[24][i].NbPersonne);
                        }
                    }
                    for (var i = 0; i < data[25].length; i++) {
                        $scope.Libelle.push(data[25][i].Libelle);
                        $scope.nbPersSpec.push(parseInt(data[25][i].Val));
                    }
                    refreshSizes();
                })
                .error(function (data) {
                    console.error(data);
                });
        }
        $scope.init();


        var refreshSizes = function () {

            $scope.histoCharCurr.updateSeries(
                [{
                name: 'Nombre de places',
                type: 'column',
                data: $scope.nbPersCurrentMonth
                }, {
                name: 'Nombre de reservations',
                type: 'column',
                data: $scope.nbResCurrentMonth
                }]
            );
            $scope.histoCharCurr.updateOptions({
                xaxis: {
                categories: $scope.nbJoursCurrentMonth
                }}
            );

            $scope.histoCharOld.updateSeries(
                [{
                name: 'Nombre de places',
                type: 'column',
                data: $scope.nbPersOldMonth
                }, {
                name: 'Nombre de reservations',
                type: 'column',
                data: $scope.nbResOldMonth
                }]
            );
            $scope.histoCharOld.updateOptions({
                chart: {
                height: 350,
                type: 'bar',
                },
                
                xaxis: {
                categories: $scope.nbJoursOldMonth
                }}
            );

            $scope.histoCharCurrYear.updateSeries(
                [{
                name: 'Nombre de places',
                type: 'column',
                data: $scope.nbPersCurrentYear
                }, {
                name: 'Nombre de reservations',
                type: 'column',
                data: $scope.nbResCurrentYear
                }]
            );

            $scope.histoCharOldYear.updateSeries(
                [{
                name: 'Nombre de places',
                type: 'column',
                data: $scope.nbPersOldYear
                }, {
                name: 'Nombre de reservations',
                type: 'column',
                data: $scope.nbResOldYear
                }]
            );

            $scope.PieCharGenreCurrentMonth.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharGenreCurrentMonth.updateSeries(
                $scope.nbPlacesCurrentMonthGenre
            );

            $scope.PieCharGenreOldMonth.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharGenreOldMonth.updateSeries(
                $scope.nbPlacesOldMonthGenre
            );

            $scope.PieCharGenreCurrentYear.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharGenreCurrentYear.updateSeries(
                $scope.nbPlacesCurrentYearGenre
            );

            $scope.PieCharGenreOldYear.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharGenreOldYear.updateSeries(
                $scope.nbPlacesOldYearGenre
            );

            $scope.PieCharProgGenreCurrentMonth.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharProgGenreCurrentMonth.updateSeries(
                $scope.nbPlacesProgCurrentMonthGenre
            );

            $scope.PieCharProgGenreOldMonth.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharProgGenreOldMonth.updateSeries(
                $scope.nbPlacesProgOldMonthGenre
            );

            $scope.PieCharProgGenreCurrentYear.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharProgGenreCurrentYear.updateSeries(
                $scope.nbPlacesProgCurrentYearGenre
            );

            $scope.PieCharProgGenreOldYear.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharProgGenreOldYear.updateSeries(
                $scope.nbPlacesProgOldYearGenre
            );

            $scope.PieCharNbSpecGenreCurrentYear.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharNbSpecGenreCurrentYear.updateSeries(
                $scope.nbSpecCurrentYearGenre
            );

            $scope.PieCharNbSpecGenreOldYear.updateOptions({
                labels:$scope.Genre
            });
            $scope.PieCharNbSpecGenreOldYear.updateSeries(
                $scope.nbSpecOldYearGenre
            );

            $scope.PieCharNbPersAccomCurrentYear.updateOptions({
                labels:['oui', 'non']
            });
            $scope.PieCharNbPersAccomCurrentYear.updateSeries(
                $scope.nbPersOuiCurrentYear
            );

            $scope.PieCharNbPersAccomOldYear.updateOptions({
                labels:['non', 'oui']});
            $scope.PieCharNbPersAccomOldYear.updateSeries(
                $scope.nbPersOuiOldYear
            );

            $scope.PieCharNbPersRsaCurrentYear.updateOptions({
                labels:['non', 'oui']
            });
            $scope.PieCharNbPersRsaCurrentYear.updateSeries(
                $scope.nbPersRsaCurrentYear
            );

            $scope.PieCharNbPersRsaOldYear.updateOptions({
                labels:['non', 'oui']
            });
            $scope.PieCharNbPersRsaOldYear.updateSeries(
                $scope.nbPersRsaOldYear
            );

            $scope.PieCharNbPersHCurrentYear.updateOptions({
                labels:['Homme', 'Femme']
            });
            $scope.PieCharNbPersHCurrentYear.updateSeries(
                $scope.nbPersHCurrentYear
            );

            $scope.PieCharNbPersHOldYear.updateOptions({
                labels:['Homme', 'Femme']
            });
            $scope.PieCharNbPersHOldYear.updateSeries(
                $scope.nbPersHOldYear
            );

            $scope.PieCharNbResVille.updateOptions({
                labels:$scope.NomVillCurrentMonth
            });
            $scope.PieCharNbResVille.updateSeries(
                $scope.nbResVillCurrentMonth
            );

            $scope.PieCharNbResVilleCurrentYear.updateOptions({
                labels:$scope.NomVillCurrentYear
            });
            $scope.PieCharNbResVilleCurrentYear.updateSeries(
                $scope.nbResVillCurrentYear
            );

            $scope.PieCharNbResVilleOldYear.updateOptions({
                labels:$scope.NomVillOldYear
            });
            $scope.PieCharNbResVilleOldYear.updateSeries(
                $scope.nbResVillOldYear
            );

            $scope.PieCharAgeCurrentYear.updateOptions({
                labels:$tabAge
            });
            $scope.PieCharAgeCurrentYear.updateSeries(
                $tabNb
            );

            $scope.PieCharAgeOldYear.updateOptions({
                labels:$tabAgeOld
            });
            $scope.PieCharAgeOldYear.updateSeries(
                $tabNbOld
            );


            $scope.PieCharNbPersSpec.updateOptions({
                labels:$scope.Libelle
            });
            $scope.PieCharNbPersSpec.updateSeries(
                $scope.nbPersSpec
            );

            return true;
        }

    }
);