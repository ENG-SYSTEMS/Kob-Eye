app.controller('{{ identifier }}CtrlExtends', function($interval, $timeout,$location, $compile, $sce, $scope, $rootScope, $routeParams,$http,VetoccitanBandeauStore) {

    $scope.initBandeau = function () {
        $('#ajaxwrapperFunc').spin();
        console.log('addXXXXXXXXXXXXXXXXXXXXXXXX {{ keIdentifier }}');
        $scope.VetoccitanBandeaufunction.args.values = {{ keIdentifier }}Store.getNewData();
        console.log($scope.modalObj);
        $('#ajaxwrapperFunc').spin(false);
    }
    $scope.{{ c.identifier }}modify = function (obj){
        {{ c.identifier }}Store.getOneData(obj.id,'default',false).then(function (data) {
            $scope.modalObj = data;
            $scope.modalObj.success = false;
            $scope.modalObj.title = 'Modifier {{ c.description }} '+data.label;
            console.log('edit obj',$scope.modalObj);
{# TODO  aller chercher le media child et le caler dans modalObj.Image #}
        });
        $("#modal-{{ c.identifier }}").modal();
    }

});

app.controller('{{ identifier }}FicheCtrlExtends', function($interval, $timeout,$location, $compile, $sce, $scope, $rootScope, $routeParams,$http,VetoccitanBandeauStore,VetoccitanMediaStore) {
    var timer = 0;
    var timer2 = 0;
    inter = $interval(function() {
        timer++;
        if (timer === 100){
            $interval.cancel(inter);
        }
        if ($scope.obj != "" && $scope.obj != undefined && $scope.obj != null) {
            $interval.cancel(inter);
            var inter2 = $interval(function() {
                timer++;
                if (timer === 100){
                    $interval.cancel(inter2);
                }
                //console.error(VetoccitanMediaStore.data.children.length);
                if(VetoccitanMediaStore.data.children.length > 0){
                    $interval.cancel(inter2);
                    $scope.obj.Image = VetoccitanMediaStore.data.children[0].Image;
                }
            },100);

        }
    }, 100);

});

