<div class="page-content-inner">
    <ul class="list-unstyled breadcrumb">
        <li>
            <a href="#/TableauDeBord">Tableau de bord</a>
        </li>
        <li>
            <a href="#/{{ CurrentMenu.Url }}">Liste des {{ ObjectClass.getDescription() }}s</a>
        </li>
        <li>
            <a href="javascript: void(0);" ng-bind-html="obj.label"></a>
        </li>
    </ul>

    <!-- Default Panel -->
    <section class="panel">
        <div class="panel-heading">
            <div class="pull-right head-buttons">
                {% if operation.edit %}<button type="button" class="btn btn-default btn-warning margin-inline" ng-click="modify(obj)">Modifier</button>{% endif %}
                {% if operation.delete %}<button type="button" class="btn btn-default btn-danger margin-inline" ng-click="delete(obj)">Supprimer</button>{% endif %}
            </div>
            <h3 ng-bind-html="obj.label" class="head-label"></h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-12">
                    {% for field in fichefields %}
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-xs-6 detail-label">
                                <label class="form-control-label" for="l0">{% if field.parentDescription is not empty %}{{ field.parentDescription }}{% else %}{{ field.description }}{% endif %}</label>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-6 detail-value" >
                                {% if field.type == "price" %}
                                    <span class="label label-warning">{[{ obj.{{ field.name }} | currency:"" }]} â‚¬</span>
                                {% elseif field.type == "float" %}
                                    <span class="label label-warning">{[{ obj.{{ field.name }}| currency:"" }]}</span>
                                {% elseif field.type == "extlink" %}
                                    <a class="btn btn-success btn-xs" href="https://zabbix.abtel.fr/guacamole/#/client/{[{ obj.{{ field.name }} }]}" target="_blank">{{ field.listDescr }}</a>
                                {% elseif field.type == "int" %}
                                    <span class="label label-primary">{[{ obj.{{ field.name }} }]}</span>
                                {% elseif field.type == "boolean" %}
                                    <span class="label label-success" ng-if="obj.{{ field.name }}"><i class="fa fa-check"></i></span>
                                    <span class="label label-danger" ng-if="!obj.{{ field.name }}"><i class="fa fa-times"></i></span>
                                {% elseif field.type == "fkey" and field.card == "short" %}
                                    <a class="btn btn-primary btn-xs" href="#{{ field.link }}/{[{ obj.{{ field.name }} }]}">{[{ obj.{{ field.name }}label }]}</a>
                                {% else %}
                                    <span  ng-bind-html="obj.{{ field.name }}"></span>
                                {% endif %}
                            </div>
                        </div>
                        {% if loop.index - loop.revindex0 == 1 or loop.index - loop.revindex0 == 0 %}
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    <!-- End Default Panel -->
    <div class="nav-tabs-horizontal">
        <ul class="nav nav-tabs" role="tablist">
            {% for child in ChildrenElements %}
            <li class="nav-item">
                <a class="nav-link {% if loop.first %}active{% endif %}" href="javascript: void(0);" data-toggle="tab" data-target="#tab{{ child.objectName }}" role="tab">{{ child.objectDescription }}</a>
            </li>
            {% endfor %}
        </ul>
        <div class="tab-content">
            {% for child in ChildrenElements %}
            <div class="tab-pane {% if loop.first %}active{% endif %}" id="tab{{ child.objectName }}" role="tabpanel">
                {% if child.recursive %}
                    {{ include(template_from_string(module(Query~'/Tree'))) }}
                {% else %}
                    <section class="panel">
                        <div class="panel-body">
                            <ng-include src="'/{{ CurrentUrl }}/'+obj.id+'/{{ child.objectName }}/ListChildren.htm'" ng-if="show"></ng-include>
                        </div>
                    </section>
                    <!-- End Default Panel -->
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>

</div>

<div class="modal fade modal-size-large" id="modalfiche-{{ identifier }}" role="modal" aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">{[{ modalObj.title }]}</h4>
            </div>
            <div class="modal-body">
                <div class="alert alert-danger" ng-if="modalObj.errors">
                    <ul>
                        <li ng-repeat="e in modalObj.errors">{[{ e.Message }]}</li>
                    </ul>
                </div>
                {{ include(template_from_string(module('Systeme/Utils/Form?Path=[!Query!]'))) }}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-dismiss="modal">Annuler</button>
                <button type="button" class="btn btn-primary" ng-click="modalSave()">Enregistrer les modifications</button>
            </div>
        </div>
    </div>
</div>

